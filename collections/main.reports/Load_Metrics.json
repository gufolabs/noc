{
    "name": "Load Metrics",
    "$collection": "main.reports",
    "uuid": "e193a2bf-0320-4f98-978f-cb0f0ca550f9",
    "title": "Load Metrics (New)",
    "description": "Load Metrics",
    "bands": [
        {
            "name": "Root",
            "orientation": "H",
            "queries": [
                {
                    "datasource": "loadmetricsds",
                    "json": null
                },
                {
                    "datasource": "managedobjectds",
                    "json": null
                }
            ]
        },
        {
            "name": "load_interfaces",
            "condition_param": "reporttype",
            "condition_value": "load_interfaces",
            "orientation": "H",
            "parent": "Root",
            "queries": [
                {
                    "ds_query": "select * from Root"
                }
            ]
        },
        {
            "name": "load_cpu",
            "condition_param": "reporttype",
            "condition_value": "load_cpu",
            "orientation": "H",
            "parent": "Root",
            "queries": [
                {
                    "ds_query": "select * from Root"
                }
            ]
        },
        {
            "name": "ping",
            "condition_param": "reporttype",
            "condition_value": "ping",
            "orientation": "H",
            "parent": "Root",
            "queries": [
                {
                    "ds_query": "select * from Root"
                }
            ]
        }
    ],
    "bands_format": [
        {
            "name": "load_interfaces",
            "column_format": [
                {
                    "name": "managed_object_id",
                    "title": "ID",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.name",
                    "title": "Object Name",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.address",
                    "title": "IP Address",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.model",
                    "title": "Object Platform",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.administrativedomain",
                    "title": "Object Administrative domain",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.segment",
                    "title": "Object Segment",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.container",
                    "title": "Object Geo Address",
                    "format_type": "string"
                },
                {
                    "name": "iface_name",
                    "title": "Interface Name",
                    "format_type": "string"
                },
                {
                    "name": "iface_description",
                    "title": "Interface Description",
                    "format_type": "string"
                },
                {
                    "name": "iface_speed",
                    "title": "Interface Speed",
                    "format_type": "string"
                },
                {
                    "name": "load_in_perc",
                    "title": "Load In (90% percentile)",
                    "format_type": "string"
                },
                {
                    "name": "load_in_avg",
                    "title": "Load In (Average)",
                    "format_type": "string"
                },
                {
                    "name": "load_in_p",
                    "title": "Load In (% Bandwith)",
                    "format_type": "string"
                },
                {
                    "name": "load_out_perc",
                    "title": "Load Out (90% percentile)",
                    "format_type": "string"
                },
                {
                    "name": "load_out_avg",
                    "title": "Load Out (Average)",
                    "format_type": "string"
                },
                {
                    "name": "load_out_p",
                    "title": "Load Out (% Bandwith)",
                    "format_type": "string"
                },
                {
                    "name": "octets_in_sum",
                    "title": "Traffic In (Sum by period in MB)",
                    "format_type": "string"
                },
                {
                    "name": "octets_out_sum",
                    "title": "Traffic Out (Sum by period in MB)",
                    "format_type": "string"
                },
                {
                    "name": "errors_in",
                    "title": "Errors In (packets/s)",
                    "format_type": "string"
                },
                {
                    "name": "errors_in_sum",
                    "title": "Errors In (Summary)",
                    "format_type": "string"
                },
                {
                    "name": "errors_out",
                    "title": "Errors Out (packets/s)",
                    "format_type": "string"
                },
                {
                    "name": "errors_out_sum",
                    "title": "Errors Out (Summary)",
                    "format_type": "string"
                },
                {
                    "name": "discards_in",
                    "title": "Discards In (packets/s)",
                    "format_type": "string"
                },
                {
                    "name": "discards_out",
                    "title": "Discards Out (packets/s)",
                    "format_type": "string"
                },
                {
                    "name": "interface_flap",
                    "title": "Interface Flap count",
                    "format_type": "string"
                },
                {
                    "name": "lastchange",
                    "title": "Interface Last Change (days)",
                    "format_type": "string"
                },
                {
                    "name": "status_oper_last",
                    "title": "Operational status (Last)",
                    "format_type": "string"
                },
                {
                    "name": "interface_load_url",
                    "title": "Interface Load URL",
                    "format_type": "string"
                },
                {
                    "name": "mac_counter",
                    "title": "Mac counter",
                    "format_type": "string"
                }
            ],
            "title_template": "-=LOAD INTERFACES=-"
        },
        {
            "name": "load_cpu",
            "column_format": [
                {
                    "name": "managed_object_id",
                    "title": "ID",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.name",
                    "title": "Object Name",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.address",
                    "title": "IP Address",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.model",
                    "title": "Object Platform",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.administrativedomain",
                    "title": "Object Administrative domain",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.segment",
                    "title": "Object Segment",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.container",
                    "title": "Object Geo Address",
                    "format_type": "string"
                },
                {
                    "name": "cpu_usage",
                    "title": "CPU Usage",
                    "format_type": "string"
                },
                {
                    "name": "memory_usage",
                    "title": "Memory Usage",
                    "format_type": "string"
                }
            ],
            "title_template": "-=LOAD CPU=-"
        },
        {
            "name": "ping",
            "column_format": [
                {
                    "name": "managed_object_id",
                    "title": "ID",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.name",
                    "title": "Object Name",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.address",
                    "title": "IP Address",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.model",
                    "title": "Object Platform",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.administrativedomain",
                    "title": "Object Administrative domain",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.segment",
                    "title": "Object Segment",
                    "format_type": "string"
                },
                {
                    "name": "managedobjectds.container",
                    "title": "Object Geo Address",
                    "format_type": "string"
                },
                {
                    "name": "ping_rtt",
                    "title": "Ping RTT",
                    "format_type": "string"
                },
                {
                    "name": "ping_attempts",
                    "title": "Ping Attempts",
                    "format_type": "string"
                }
            ],
            "title_template": "-=PING=-"
        }
    ],
    "category": "inv",
    "code": null,
    "hide": false,
    "time_params": "A",
    "localization": {
        "title": {
            "ru": "Отчет по метрикам (Новый)"
        },
        "description": {
            "ru": "Отчет по метрикам"
        },
        "parameters.start": {
            "ru": "С"
        },
        "parameters.end": {
            "ru": "По"
        },
        "parameters.segment": {
            "ru": "Сегмент"
        },
        "parameters.administrative_domain": {
            "ru": "По З.О."
        },
        "parameters.resource_group": {
            "ru": "По Группе устройств"
        },
        "parameters.interface_profile": {
            "ru": "По Профилю интерфейса"
        },
        "parameters.exclude_zero": {
            "ru": "Исключить интерфейсы с нулевой загрузкой"
        }
    },
    "parameters": [
        {
            "name": "reporttype",
            "description": null,
            "choices": ["load_interfaces", "load_cpu", "ping"],
            "default": "load_interfaces",
            "hide": false,
            "label": "Report Type",
            "required": true,
            "type": "choice"
        },
        {
            "name": "start",
            "description": null,
            "hide": false,
            "label": "From",
            "required": true,
            "type": "date"
        },
        {
            "name": "end",
            "description": null,
            "hide": false,
            "label": "To",
            "required": true,
            "type": "date"
        },
        {
            "name": "segment",
            "description": null,
            "hide": false,
            "label": "Segment",
            "model_id": "inv.NetworkSegment",
            "type": "model"
        },
        {
            "name": "administrative_domain",
            "description": null,
            "hide": false,
            "label": "By Adm. domain",
            "model_id": "sa.AdministrativeDomain",
            "type": "model"
        },
        {
            "name": "resource_group",
            "description": null,
            "hide": false,
            "label": "By Resource Group",
            "model_id": "inv.ResourceGroup",
            "type": "model"
        },
        {
            "name": "interface_profile",
            "description": null,
            "hide": false,
            "label": "By Interface Profile",
            "model_id": "inv.InterfaceProfile",
            "type": "model"
        },
        {
            "name": "exclude_zero",
            "description": null,
            "hide": false,
            "label": "Exclude interface that has zero load",
            "type": "bool"
        },
        {
            "name": "fields",
            "description": null,
            "condition_param": "reporttype",
            "condition_values": [
                {"value": "load_interfaces", "default_value": "managedobjectds.name,managedobjectds.address,managedobjectds.model,managedobjectds.administrativedomain,iface_name,iface_description,load_in_avg,load_out_avg,errors_in,errors_out"},
                {"value": "load_cpu", "default_value": "managedobjectds.name,managedobjectds.address,managedobjectds.model,managedobjectds.administrativedomain,cpu_usage,memory_usage"},
                {"value": "ping", "default_value": "managedobjectds.name,managedobjectds.address,managedobjectds.model,managedobjectds.administrativedomain,ping_rtt,ping_attempts"}
             ],
            "hide": false,
            "label": "Fields",
            "type": "fields_selector"
        }
    ],
    "templates": [
        {
            "code": "DEFAULT",
            "handler": "simplereport",
            "has_preview": false,
            "is_alterable_output": true,
            "output_type": "csv"
        }
    ]
}
