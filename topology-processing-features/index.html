
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="NOC, the open-source network management system">
      
      
        <meta name="author" content="Gufo Labs">
      
      
        <link rel="canonical" href="https://getnoc.com/topology-processing-features/">
      
      
        <link rel="prev" href="../connection-type-restrictions/">
      
      
        <link rel="next" href="../configuration-management/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.2.5">
    
    
      
        <title>Topology Processing Features - NOC</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0e669242.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-9JQSC5GQTM"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-9JQSC5GQTM",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-9JQSC5GQTM",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#capabilities-of-noc-with-topology" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="NOC" class="md-header__button md-logo" aria-label="NOC" data-md-component="logo">
      
  <img src="../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NOC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Topology Processing Features
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../ru/topology-processing-features/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/gufolabs/noc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../installation-guide/" class="md-tabs__link">
          
  
  Installation

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../sections-overview/guides/" class="md-tabs__link">
          
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../sections-overview/references/" class="md-tabs__link">
          
  
  References

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../sections-overview/howto/" class="md-tabs__link">
          
  
  How-to

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../sections-overview/background/" class="md-tabs__link">
          
  
  Background

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../blog/" class="md-tabs__link">
          
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../release-policy/" class="md-tabs__link">
          
  
  Releases

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../glossary/" class="md-tabs__link">
        
  
    
  
  Glossary

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../license/" class="md-tabs__link">
        
  
    
  
  License

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../thanks/" class="md-tabs__link">
        
  
    
  
  Thanks

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="NOC" class="md-nav__button md-logo" aria-label="NOC" data-md-component="logo">
      
  <img src="../assets/logo.svg" alt="logo">

    </a>
    NOC
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/gufolabs/noc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../installation-guide/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../sections-overview/guides/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Guides
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../sections-overview/references/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    References
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../sections-overview/howto/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    How-to
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Background
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Background
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../sections-overview/background/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../connection-restrictions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connection Restrictions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../connection-type-restrictions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connection Type Restrictions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Topology Processing Features
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Topology Processing Features
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-topology" class="md-nav__link">
    Building Topology
  </a>
  
    <nav class="md-nav" aria-label="Building Topology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manual-link-creation" class="md-nav__link">
    Manual Link Creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-links-based-on-neighbor-protocols" class="md-nav__link">
    Creating Links Based on Neighbor Protocols
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link-creation-procedure" class="md-nav__link">
    Link Creation Procedure
  </a>
  
    <nav class="md-nav" aria-label="Link Creation Procedure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request-neighbors-from-device" class="md-nav__link">
    Request Neighbors from Device
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formation-of-candidate-list" class="md-nav__link">
    Formation of Candidate List
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link-creation" class="md-nav__link">
    Link Creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link-deletion" class="md-nav__link">
    Link Deletion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link-building-methods" class="md-nav__link">
    Link Building Methods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calculating-uplink-direction" class="md-nav__link">
    Calculating Uplink Direction
  </a>
  
    <nav class="md-nav" aria-label="Calculating Uplink Direction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#level" class="md-nav__link">
    Level
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#segment-hierarchy" class="md-nav__link">
    Segment Hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip-address" class="md-nav__link">
    IP Address
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings" class="md-nav__link">
    Settings
  </a>
  
    <nav class="md-nav" aria-label="Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-priority" class="md-nav__link">
    Method Priority
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neighbor-cache" class="md-nav__link">
    Neighbor Cache
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-topology" class="md-nav__link">
    Working with Topology
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../configuration-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../host-discovery-network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Host Discovery Network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../fault-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fault Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../alarm-escalation-reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alarm Escalation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../performance-management/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Performance Management
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference-report-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with Report
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../peering-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Peering Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../service-status-monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring by Service Operation Status
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../message-notification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Message Notification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../custom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../card/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cards
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../etl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ETL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../storm-protection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storm Protection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../ui-guideline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UI Guideline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../highlights/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    NOC Products Highlights
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../blog/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../release-policy/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Releases
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../thanks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Thanks
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-topology" class="md-nav__link">
    Building Topology
  </a>
  
    <nav class="md-nav" aria-label="Building Topology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manual-link-creation" class="md-nav__link">
    Manual Link Creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-links-based-on-neighbor-protocols" class="md-nav__link">
    Creating Links Based on Neighbor Protocols
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link-creation-procedure" class="md-nav__link">
    Link Creation Procedure
  </a>
  
    <nav class="md-nav" aria-label="Link Creation Procedure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request-neighbors-from-device" class="md-nav__link">
    Request Neighbors from Device
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#formation-of-candidate-list" class="md-nav__link">
    Formation of Candidate List
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link-creation" class="md-nav__link">
    Link Creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link-deletion" class="md-nav__link">
    Link Deletion
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#link-building-methods" class="md-nav__link">
    Link Building Methods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calculating-uplink-direction" class="md-nav__link">
    Calculating Uplink Direction
  </a>
  
    <nav class="md-nav" aria-label="Calculating Uplink Direction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#level" class="md-nav__link">
    Level
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#segment-hierarchy" class="md-nav__link">
    Segment Hierarchy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ip-address" class="md-nav__link">
    IP Address
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings" class="md-nav__link">
    Settings
  </a>
  
    <nav class="md-nav" aria-label="Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#method-priority" class="md-nav__link">
    Method Priority
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#neighbor-cache" class="md-nav__link">
    Neighbor Cache
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-topology" class="md-nav__link">
    Working with Topology
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/gufolabs/noc/-/edit/master/docs/topology-processing-features/index.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="capabilities-of-noc-with-topology">Capabilities of NOC with Topology<a class="headerlink" href="#capabilities-of-noc-with-topology" title="Permanent link">&para;</a></h1>
<p>One of the key components of NOC is network topology. It is represented as a connectivity graph of equipment (<code>ManagedObject</code>). Based on this, the system can change its behavior, providing the following capabilities:</p>
<ul>
<li>Building an L2 topology based on data from equipment and external systems (<code>Remote System</code>).</li>
<li>Creating L2 connections between interfaces of the device <a href="../concepts/managed-object/">ManagedObject</a>.</li>
<li>Displaying the topology on the network map.</li>
<li>Determining the causes of incidents based on topology.</li>
<li>Performing pathfinding based on topology.</li>
<li>Generating reports based on topology data.</li>
<li>Providing topological information through the <code>API</code> - <a href="../datastream-api-reference/managedobject/">Datastream</a>.</li>
</ul>
<p>L2 topology (<code>L2 Topology</code>) is built between the interfaces <a href="../concepts/interface/">Interface</a> of the device <a href="../concepts/managed-object/">ManagedObject</a>. In addition to manual link creation (<code>Link</code>) through the user interface, the system can establish connections based on equipment data. The following stages of working with topology can be distinguished:</p>
<ul>
<li>Establishing connections between devices (manually or based on polling results).</li>
<li>Calculating the uplink direction.</li>
<li>Displaying the network diagram.</li>
<li>Building a path based on topology.</li>
</ul>
<h2 id="building-topology">Building Topology<a class="headerlink" href="#building-topology" title="Permanent link">&para;</a></h2>
<p>When building a topology, it's important to keep in mind the following terms:</p>
<ul>
<li><strong>Link</strong> (<code>Link</code>) - a pair (traditionally 2).</li>
<li><strong>Current Device</strong> - the device (<code>ManagedObject</code>) on which the polling is running.</li>
<li><strong>Neighboring Device</strong> (neighbor) - devices directly connected to the current device (not through other L2 devices). They are displayed in the device's neighbor table.</li>
<li><strong>Device Identifier</strong> - a property that allows finding the neighboring device. The following identifiers are used in topological protocols:<ul>
<li>Device MAC address (<code>Chassis ID</code>).</li>
<li>Hostname of the device.</li>
<li>IP address (<code>IP address</code>).</li>
<li>Serial number (<code>Serial</code>).</li>
</ul>
</li>
<li><strong>Device Port Identifier</strong> - used to determine the port to which the link is connected. For example:<ul>
<li>Interface name (<code>Interface Name</code>).</li>
<li>Description (<code>Description</code>).</li>
<li>Interface MAC address.</li>
<li>SNMP index (<code>ifindex</code>).</li>
<li>Interface number.</li>
<li>Others.</li>
</ul>
</li>
<li><strong>Topology Method</strong> (<code>Topology Method</code>) - the method by which the system establishes a link. In addition to the standard methods aligned with topological protocols, the system has several additional methods.</li>
</ul>
<p>To create a link (<code>Link</code>), it is mandatory to have an <a href="../concepts/interface/">Interface</a> on all connected devices. The further requirements vary depending on the method of creating a link (<code>Link</code>). Let's consider the available methods.</p>
<h3 id="manual-link-creation">Manual Link Creation<a class="headerlink" href="#manual-link-creation" title="Permanent link">&para;</a></h3>
<p>This is done through the interface panel on the <a href="">ManagedObject</a> device form. To do this, select the interface of the current device and specify the interface of the neighbor with which the link will be created.</p>
<h3 id="creating-links-based-on-neighbor-protocols">Creating Links Based on Neighbor Protocols<a class="headerlink" href="#creating-links-based-on-neighbor-protocols" title="Permanent link">&para;</a></h3>
<p>For automatic link creation, you can use information about neighbors from the device. NOC supports a fairly large number of neighbor protocols, such as <code>LLDP</code>, <code>CDP</code>, ... but the basic approaches in their operation remain the same:</p>
<ul>
<li>The device must support the ability to display a list of neighbors along with their interfaces.</li>
<li>The identifier of the neighbor from the list should allow finding the device in the system.</li>
<li>The identifier of the neighbor's port should allow finding the neighbor's port in the system.</li>
<li>In the <a href="../concepts/sa-profile/">SA Profile</a> profiles of devices, scripts for obtaining information about neighbors must be implemented.</li>
</ul>
<h3 id="link-creation-procedure">Link Creation Procedure<a class="headerlink" href="#link-creation-procedure" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>flowchart TD
    discovery_start[Start Polling] --&gt; get_lo_neighbor[Request Neighbors from Device];
    get_lo_neighbor --&gt; find_lo_neighbor[Find Neighbor in System];
    find_lo_neighbor --&gt; find_lo_neighbor_cond{Found Neighbor?};
    find_lo_neighbor_cond --&gt; |Yes| find_lo_neighbor_ri[Find Neighbor's Interface in System];
    find_lo_neighbor_ri --&gt; find_lo_neighbor_ri_cond{Found Neighbor's Interface?};
    find_lo_neighbor_ri_cond --&gt; |Yes| get_ri_neighbor[Request Neighbors of Neighbor];
    get_ri_neighbor --&gt; find_ro_neighbor[Find Neighbor of Neighbor in System];
    find_ro_neighbor --&gt; find_ro_neighbor_cond{Found Current Device?};
    find_ro_neighbor_cond --&gt; |Yes| find_ro_neighbor_ri[Find Current Device's Interface in System];
    find_ro_neighbor_ri --&gt; find_ro_neighbor_ri_cond{Found Local Interface?};
    find_lo_neighbor_ri_cond --&gt; |No| next_condition{Are There More Neighbors?};
    find_lo_neighbor_cond --&gt; |No| next_condition;
    find_ro_neighbor_ri_cond --&gt; |No| find_li_ri_cond{Is Found Interface the Same as Local?};
    find_ro_neighbor_ri_cond --&gt; |No| next_condition;
    find_li_ri_cond --&gt; |Yes| create_link[Create Link];
    find_li_ri_cond --&gt; |No| next_condition;
    next_condition --&gt; |Yes| find_lo_neighbor;
    next_condition --&gt; |No| discoveryend[End of Polling];</code></pre>
<h4 id="request-neighbors-from-device">Request Neighbors from Device<a class="headerlink" href="#request-neighbors-from-device" title="Permanent link">&para;</a></h4>
<p>At the first stage, polling is initiated on the device using one of the methods. The system obtains a list of neighbors of the <code>current device</code> (the device on which the polling is running). The list includes:</p>
<ul>
<li><code>Neighbor Identifier</code> - depends on the protocol. For <code>LLDP</code>, it can be the <code>MAC</code> address or <code>hostname</code>.</li>
<li><code>Local Port</code> - the port of the <code>current device</code> through which the neighbor is visible.</li>
<li><code>Neighbor's Port</code> - indicates the port of the neighboring device through which the current device is visible. It can be provided as a name, MAC address, or some local identifier (usually <code>snmp_index</code>).</li>
</ul>
<p>Example output for <code>LLDP</code> (it will be different for other protocols):</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;local_interface&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;GigabitEthernet0/0/1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;neighbors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;remote_chassis_id_subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_chassis_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;00:0E:5E:11:22:77&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_port_subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;port 25&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_port_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TRUNK&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_system_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;782-swc1&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_system_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ISCOM2128EA-MA-AC ROS_4.15.1365_20171229(Compiled Dec 29 2017, 15:40:31)&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_capabilities&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;local_interface&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;XGigabitEthernet0/1/1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;neighbors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;remote_chassis_id_subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_chassis_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;08:19:A6:11:22:88&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_port_subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_port&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;XGigabitEthernet0/1/2&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_port_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;\&quot;link to WAN\&quot;&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_system_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;70-swc71&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_system_description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;S5328C-EI-24S&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;remote_capabilities&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To reduce the frequency of device access, it is possible to configure neighbor cache.</p>
</div>
<h4 id="formation-of-candidate-list">Formation of Candidate List<a class="headerlink" href="#formation-of-candidate-list" title="Permanent link">&para;</a></h4>
<p>Based on the received list of identifiers, a search is conducted for the neighboring device <a href="../concepts/managed-object/">ManagedObject</a> 
and its port <a href="../concepts/interface/">Interface</a>. 
Upon success, the pair <code>current device -&gt; port, neighboring device -&gt; neighboring port</code> is added to the candidate list. 
After the candidate list is formed, the system begins its verification - it requests the neighbor table of the <em>neighboring device</em> 
and checks what <em>current device</em> is located behind the specified <em>neighboring port</em>.</p>
<p>In this case, the following errors are possible: ...</p>
<h4 id="link-creation">Link Creation<a class="headerlink" href="#link-creation" title="Permanent link">&para;</a></h4>
<p>In the event of confirmation, the link creation procedure (<code>Link</code>) begins. It is regulated by the setting <code>Discovery Policy</code> <a href="../concepts/interface-profile/">Discovery Policy</a> in the interface profile (<code>Interface Profile</code>). The following options are available:</p>
<ul>
<li><code>Ignored</code> - do not create a link (<code>Link</code>) with this port.</li>
<li><code>Create New</code> - do not create a link if one already exists.</li>
<li><code>Replace</code> - create a link with the port.</li>
<li><code>Cloud</code> - add the port to an existing link (a cloud is formed).</li>
</ul>
<p>For the procedure itself, the following variants are possible:</p>
<ul>
<li><strong>New Link</strong> - when there are no links on both interfaces. It is simply created (unless the <code>Ignored</code> option is set) and the <code>first_discovered</code> field is filled with the creation time.</li>
<li><strong>Existing Link</strong> - there is already a link between the interfaces. In this case, the <code>last_seen</code> field (the time the system last saw the link) is updated.</li>
<li><strong>Different Link</strong> - when there is a link on the interface, and the new one leads in a different direction. If the <code>Create New</code> option is set, the link will not be disconnected. However, if relinking (<code>Replace</code>) is allowed, behavior is regulated by the <code>method priority</code>. If a more priority method finds the link, it rebuilds it. If less priority, the link created by a higher priority method remains. The priority is set for the segment in the <code>Segment Profile</code>.</li>
</ul>
<!-- prettier-ignore -->
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When creating a link, the <code>first_discovered</code> field is filled with the creation time. Upon rediscovery, the <code>last_seen</code> field is updated.</p>
</div>
<!-- prettier-ignore -->
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Removal of an existing link occurs if it is not found on the neighboring device.</p>
</div>
<h4 id="link-deletion">Link Deletion<a class="headerlink" href="#link-deletion" title="Permanent link">&para;</a></h4>
<p>If, during the check of the neighboring device, the current device is not found among the neighbors, and there is a link (<code>Link</code>) between them, it is disconnected. However, if the device has been decommissioned or the ports are no longer in use, the link becomes "eternal" because polling cannot detect its absence due to device disconnection or the neighbor's absence. This may not always be convenient.</p>
<p>If there is a need to clean up links that have not been updated for a certain period, you can use the <code>ttl_policy</code> argument in the <a href="../man/link/">./noc link</a> command.</p>
<h3 id="link-building-methods">Link Building Methods<a class="headerlink" href="#link-building-methods" title="Permanent link">&para;</a></h3>
<p>Available methods for building links:</p>
<ul>
<li>Method - the method for building the link.</li>
<li>Protocol - the neighbor discovery protocol used by the method.</li>
<li>Script - the script required in the profile to make the method work.</li>
<li>Capability - the capability required to initiate polling.</li>
</ul>
<table>
<thead>
<tr>
<th>Метод</th>
<th>Протокол</th>
<th>Скрипт</th>
<th>Caps</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../discovery-reference/box/cdp/">CDP</a></td>
<td>CDP</td>
<td><a href="../scripts-reference/get_cdp_neighbors/">get_cdp_neighbors</a></td>
<td><code>Network  CDP</code></td>
</tr>
<tr>
<td><a href="../discovery-reference/box/rep/">REP</a></td>
<td>REP</td>
<td><a href="../scripts-reference/get_rep_topology/">get_rep_topology</a></td>
<td><code>Network  REP</code></td>
</tr>
<tr>
<td><a href="../discovery-reference/box/lldp/">LLDP</a></td>
<td>LLDP</td>
<td><a href="../scripts-reference/get_lldp_neighbors/">get_lldp_neighbors</a></td>
<td><code>Network  LLDP</code></td>
</tr>
<tr>
<td><a href="../discovery-reference/box/stp/">STP</a></td>
<td>STP</td>
<td><a href="../scripts-reference/get_spanning_tree/">get_spanning_tree</a></td>
<td><code>Network  STP</code></td>
</tr>
<tr>
<td><a href="../discovery-reference/box/udld/">UDLD</a></td>
<td>UDLD</td>
<td><a href="../scripts-reference/get_udld_neighbors/">get_udld_neighbors</a></td>
<td><code>Network  UDLD</code></td>
</tr>
<tr>
<td><a href="../discovery-reference/box/oam/">OAM</a></td>
<td>OAM</td>
<td><a href="../scripts-reference/get_oam_status/">get_oam_status</a></td>
<td><code>Network  OAM</code></td>
</tr>
<tr>
<td><a href="../discovery-reference/box/bfd/">BFD</a></td>
<td>BFD</td>
<td><a href="../scripts-reference/get_bfd_sessions/">get_bfd_sessions</a></td>
<td><code>Network  BFD</code></td>
</tr>
<tr>
<td><a href="../discovery-reference/box/fdp/">FDP</a></td>
<td>FDP</td>
<td><a href="../scripts-reference/get_fdp_neighbors/">get_fdp_neighbors</a></td>
<td><code>Network  FDP</code></td>
</tr>
<tr>
<td><a href="../discovery-reference/box/huawei_ndp/">Huawei NDP (NTDP)</a></td>
<td>Huawei NDP</td>
<td><a href="../scripts-reference/get_huawei_ndp_neighbors/">get_huawei_ndp_neighbors</a></td>
<td><code>Network  FDP</code></td>
</tr>
<tr>
<td><a href="../discovery-reference/box/lacp/">LACP</a></td>
<td>LACP</td>
<td><a href="../scripts-reference/get_lacp_neighbors/">get_lacp_neighbors</a></td>
<td><code>Network  LACP</code></td>
</tr>
<tr>
<td><a href="../discovery-reference/box/nri/">NRI</a></td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><a href="../discovery-reference/box/ifdesc/">ifDesc</a></td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><a href="../discovery-reference/box/xmac/">xMAC</a></td>
<td>-</td>
<td><a href="../scripts-reference/get_mac_address_table/">get_mac_address_table</a></td>
<td>-</td>
</tr>
</tbody>
</table>
<p><a href="../discovery-reference/segment/mac/">Segment</a> - a separate method for building links based on the MAC address table (<code>FDB</code>).
Unlike those listed in the table, it establishes links between devices within the same segment and operates on a segment schedule.</p>
<h2 id="calculating-uplink-direction">Calculating Uplink Direction<a class="headerlink" href="#calculating-uplink-direction" title="Permanent link">&para;</a></h2>
<p>A typical connectivity graph is undirected: all nodes in the graph are equal to each other. However, in real network conditions, they are divided into loosely connected clusters - <a href="../concepts/network-segment/">Network Segments</a>. 
Connection between clusters is established through dedicated nodes (referred to as aggregators, concentrators, etc.). 
Knowing this information is important for the proper operation of <a href="../glossary/#rca">RCA</a> - determining the cause of failures based on topology. 
If cluster connectivity goes through a single node, its unavailability will result in the unavailability of all cluster nodes.</p>
<p>The system has several approaches to calculating the uplink direction. Let's take a closer look at them.</p>
<h3 id="level">Level<a class="headerlink" href="#level" title="Permanent link">&para;</a></h3>
<p>The position of a device relative to others. The higher the level, the more important the device is for the network. A device with a higher level than the current one is considered higher-level, and the uplink direction is considered to go through it. As an example, you can specify the levels of network devices based on their roles.</p>
<table>
<thead>
<tr>
<th>Role</th>
<th>Level</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Client's Equipment</strong></td>
<td><strong>10-19</strong></td>
</tr>
<tr>
<td>CPE</td>
<td>15</td>
</tr>
<tr>
<td><strong>Access Level</strong></td>
<td><strong>20-29</strong></td>
</tr>
<tr>
<td>VPN Server</td>
<td>22</td>
</tr>
<tr>
<td>WiFi Access Point</td>
<td>22</td>
</tr>
<tr>
<td>Media Gateway</td>
<td>23</td>
</tr>
<tr>
<td>Access Switch</td>
<td>25</td>
</tr>
<tr>
<td><strong>Aggregation Level</strong></td>
<td><strong>30-39</strong></td>
</tr>
<tr>
<td>WiFi Controller</td>
<td>35</td>
</tr>
<tr>
<td>Aggregation Switch</td>
<td>38</td>
</tr>
<tr>
<td><strong>City Core</strong></td>
<td><strong>40-49</strong></td>
</tr>
<tr>
<td>L3 switch/router</td>
<td>42</td>
</tr>
<tr>
<td>BRAS</td>
<td>44</td>
</tr>
<tr>
<td>MPLS PE</td>
<td>44</td>
</tr>
<tr>
<td>MPLS P</td>
<td>46</td>
</tr>
<tr>
<td>ASBR</td>
<td>48</td>
</tr>
<tr>
<td><strong>Regional Core</strong></td>
<td><strong>50-59</strong></td>
</tr>
<tr>
<td>L3 switch/router</td>
<td>52</td>
</tr>
<tr>
<td>MPLS PE</td>
<td>54</td>
</tr>
<tr>
<td>MPLS P</td>
<td>56</td>
</tr>
<tr>
<td>ASBR</td>
<td>58</td>
</tr>
<tr>
<td><strong>Macroregional Core</strong></td>
<td><strong>60-69</strong></td>
</tr>
<tr>
<td>L3 switch/router</td>
<td>62</td>
</tr>
<tr>
<td>MPLS PE</td>
<td>64</td>
</tr>
<tr>
<td>MPLS P</td>
<td>66</td>
</tr>
<tr>
<td>ASBR</td>
<td>68</td>
</tr>
<tr>
<td><strong>National-wide Core</strong></td>
<td><strong>70-79</strong></td>
</tr>
<tr>
<td>L3 switch/router</td>
<td>72</td>
</tr>
<tr>
<td>MPLS PE</td>
<td>74</td>
</tr>
<tr>
<td>MPLS P</td>
<td>76</td>
</tr>
<tr>
<td>ASBR</td>
<td>78</td>
</tr>
<tr>
<td><strong>World-wide Core</strong></td>
<td><strong>70-79</strong></td>
</tr>
<tr>
<td>L3 switch/router</td>
<td>82</td>
</tr>
<tr>
<td>MPLS PE</td>
<td>84</td>
</tr>
<tr>
<td>MPLS P</td>
<td>86</td>
</tr>
<tr>
<td>ASBR</td>
<td>88</td>
</tr>
</tbody>
</table>
<h3 id="segment-hierarchy">Segment Hierarchy<a class="headerlink" href="#segment-hierarchy" title="Permanent link">&para;</a></h3>
<p>In NOC, each device must have its assigned segment <a href="../concepts/network-segment/">Network Segment</a>. 
Devices located in a parent segment relative to the segment of the device are considered higher-level, and the uplink direction is assumed to go through them.</p>
<h3 id="ip-address">IP Address<a class="headerlink" href="#ip-address" title="Permanent link">&para;</a></h3>
<p>As a criterion, you can use the IP address of the device. Often, higher-level devices (gateways) are assigned the lowest or highest IP address from the IP network range. This can be used...</p>
<h2 id="settings">Settings<a class="headerlink" href="#settings" title="Permanent link">&para;</a></h2>
<p>The polling settings for each method are located in the <code>Box</code> tab within the topology section of the <a href="../concepts/managed-object-profile/#Box(Full_Polling)">Managed Object Profile</a>. To activate a method, you need to check the box next to it.</p>
<p>The requirements for each method are specified in the section. You should take into account the following requirements:</p>
<ul>
<li>L2 links are built between interfaces, so interface polling <a href="../discovery-reference/box/interface/">Interface</a> must be enabled for the device.</li>
<li>To run the methods, they must be supported on the device, so you need to enable capability polling <a href="../discovery-reference/box/caps/">Capabilities</a>. This is not required for the <code>ifDesc</code>, <code>xMAC</code>, and <code>NRI</code> methods.</li>
<li>Some methods perform device lookup by identifier, so identifier polling <a href="../discovery-reference/box/id/">ID</a> must be enabled for them.</li>
</ul>
<p>In addition to configuring polling, you must also include the method in the method priority.</p>
<h3 id="method-priority">Method Priority<a class="headerlink" href="#method-priority" title="Permanent link">&para;</a></h3>
<p>The configuration of priorities is located in the <a href="../concepts/network-segment-profile/">Network Segment Profile</a> - <code>Topology Building Methods</code>. If a device supports multiple link-building methods, a situation may arise where the information from different methods differs. For example, a link is built to one device based on the interface description (<code>ifDesc</code>), while another link is built based on <code>LLDP</code>. In this case, the method located higher in the priority list will prevail.</p>
<!-- prettier-ignore -->
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>If a method is absent from the priority list, polling for it is not conducted.</p>
<p>After polling is completed, links should be built. In case of errors, they will be logged.</p>
<h3 id="neighbor-cache">Neighbor Cache<a class="headerlink" href="#neighbor-cache" title="Permanent link">&para;</a></h3>
<p>For link building, a prerequisite is its confirmation from both sides. If a device has a large number of neighbors, the confirmation procedure can lead to increased load (NOC will access the device for each neighbor during polling). To alleviate this situation, a <em>Neighbor Cache</em> is provided. When enabled for a specified time (<code>TTL</code>), the system remembers the device's neighbors and does not access it during that time. After the cache expires, accessing the device will be required during polling.</p>
<p>The configuration is located in the <a href="../concepts/managed-object-profile/#Box(Full_Polling)">Managed Object Profile</a> -&gt; <code>Object Management</code> -&gt; <code>Settings</code> -&gt; <code>Object Profile</code> on the <code>Box</code> tab. By default, it is set to 0, meaning it is disabled. A value greater than 0 determines the time during which the system <strong>memorizes the information obtained from the device</strong> and uses it when searching for neighbors, rather than accessing the device. The use of neighbors from the cache can be seen in the polling log with the entry: <code>[discovery|box|&lt;MONAME&gt;|lldp] Use neighbors cache</code>.</p>
<!-- prettier-ignore -->
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When the neighbor cache is enabled, new neighbors of the device will only be recognized by the system after the cache expiration. This can be misleading.</p>
</div>
<h2 id="working-with-topology">Working with Topology<a class="headerlink" href="#working-with-topology" title="Permanent link">&para;</a></h2>
<ul>
<li>Segment Diagram</li>
<li>Path Trace to Upstream from a Card</li>
<li>Path Calculation <a href="../nbi-api-reference/path/">path</a></li>
<li>RCA Calculation in Alarms <a href="../fault-management/#Topology%20Correlation">Topology Correlation</a></li>
<li>Reports on Metrics with Topology Consideration</li>
</ul>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../connection-type-restrictions/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Connection Type Restrictions" rel="prev">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Connection Type Restrictions
              </div>
            </div>
          </a>
        
        
          
          <a href="../configuration-management/" class="md-footer__link md-footer__link--next" aria-label="Next: Configuration Management" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Configuration Management
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2007-2025, Gufo Labs
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit", "navigation.tabs", "navigation.tabs.sticky", "navigation.prune", "navigation.footer"], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": "24.1"}</script>
    
    
      <script src="../assets/javascripts/bundle.78eede0e.min.js"></script>
      
    
  </body>
</html>