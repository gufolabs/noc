
<!doctype html>
<html lang="ru" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="NOC, the open-source network management system">
      
      
        <meta name="author" content="Gufo Labs">
      
      
        <link rel="canonical" href="https://getnoc.com/ru/host-discovery-network/">
      
      
        <link rel="prev" href="../configuration-management/">
      
      
        <link rel="next" href="../fault-management/">
      
      
        
          <link rel="alternate" href="../../host-discovery-network/" hreflang="en">
        
          <link rel="alternate" href="./" hreflang="ru">
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Host Discovery Network - NOC</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9JQSC5GQTM"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9JQSC5GQTM",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9JQSC5GQTM",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ip" class="md-skip">
          Перейти к содержанию
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул">
    <a href="../" title="NOC" class="md-header__button md-logo" aria-label="NOC" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NOC
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Host Discovery Network
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Выберите язык">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../host-discovery-network/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Поиск" placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Поиск">
        
        <button type="reset" class="md-search__icon md-icon" title="Очистить" aria-label="Очистить" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Инициализация поиска
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/gufolabs/noc" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Вкладки" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../installation-guide/" class="md-tabs__link">
          
  
  
  Установка

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../sections-overview/guides/" class="md-tabs__link">
          
  
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../sections-overview/references/" class="md-tabs__link">
          
  
  
  References

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../sections-overview/howto/" class="md-tabs__link">
          
  
  
  How-to

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../sections-overview/background/" class="md-tabs__link">
          
  
  
  Background

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../blog/" class="md-tabs__link">
          
  
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../release-policy/" class="md-tabs__link">
          
  
  
  Releases

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../glossary/" class="md-tabs__link">
        
  
  
    
  
  Glossary

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../license/" class="md-tabs__link">
        
  
  
    
  
  License

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../thanks/" class="md-tabs__link">
        
  
  
    
  
  Thanks

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Навигация" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../" title="NOC" class="md-nav__button md-logo" aria-label="NOC" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    NOC
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/gufolabs/noc" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../installation-guide/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Установка
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../sections-overview/guides/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../sections-overview/references/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    References
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../sections-overview/howto/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    How-to
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Background
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Background
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sections-overview/background/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Обзор
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connection-restrictions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connection Restrictions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connection-type-restrictions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connection Type Restrictions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topology-processing-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Topology Processing Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Host Discovery Network
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Host Discovery Network
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Запуск опроса сети
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Запуск опроса сети">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Примеры использования
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Получения данных из внешних систем
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Обработка результатов
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Правила обработки результатов
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Правила обработки результатов">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Разрешение конфликтов источников
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        Дедупликация
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        Сигналы
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        Глобальные настройки
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        Шаблоны устройств
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        Примеры настроек
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipam" class="md-nav__link">
    <span class="md-ellipsis">
      
        Занесение результатов с IPAM
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        Автоматический запуск сканирования
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fault-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fault Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../alarm-escalation-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Alarm Escalation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../performance-management/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Performance Management
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference-report-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Working with Report
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../peering-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Peering Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../service-status-monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Monitoring by Service Operation Status
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../message-notification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Message Notification
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../card/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cards
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../etl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ETL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storm-protection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Storm Protection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ui-guideline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI Guideline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../highlights/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    NOC Products Highlights
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../blog/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../release-policy/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    
  
    Releases
  

    
  </span>
  
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    License
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../thanks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thanks
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Запуск опроса сети
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Запуск опроса сети">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Примеры использования
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Получения данных из внешних систем
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Обработка результатов
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Правила обработки результатов
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Правила обработки результатов">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Разрешение конфликтов источников
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        Дедупликация
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        Сигналы
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        Глобальные настройки
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        Шаблоны устройств
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        Примеры настроек
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ipam" class="md-nav__link">
    <span class="md-ellipsis">
      
        Занесение результатов с IPAM
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        Автоматический запуск сканирования
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/gufolabs/noc/-/edit/master/docs/host-discovery-network/index.ru.md" title="Редактировать страницу" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="ip">Выявлением устройств путём опроса IP подсетей<a class="headerlink" href="#ip" title="Permanent link">&para;</a></h1>
<p>Первоначальное заполнение системы данными достаточно трудоёмкий процесс, требующий значительных затрат времени.  Помимо привычных инструментов: ручное добавление через веб-интерфейс в НОКе доступен опрос <em>IP сетей</em> на предмет наличия в них доступных IP адресов. Анализ этих адресов на предмет открытых протоколов позволяет выявлять активное сетевое оборудование, с последующим занесением его в систему в качестве устройств (<code>Managed Object</code>). Активный опрос сетей позволяет:</p>
<ul>
<li>Автоматизировать занесение устройств (<em>Managed Object</em>) в систему</li>
<li>Актуализировать адреса в <code>IPAM</code>, получая их во время опроса сети</li>
<li>Позволяет обнаруживать изменения в части новых IP адресов</li>
</ul>
<p>Следующие компоненты системы могут быть источниками данных для опроса:</p>
<ul>
<li><strong>network-scan</strong> - активный опрос сети. Выполняется командой <code>./noc net-scan</code></li>
<li><strong>etl</strong> - обмен данными с внешними системами</li>
<li><strong>neighbors</strong> - не распознанные системой соседи протоколов сети</li>
<li><strong>snmptrap/syslog</strong> - сообщения в систему от неизвестных отправителей</li>
<li><strong>manual</strong> - ручной ввод данных</li>
</ul>
<p><strong>Обнаруженные адреса</strong> заносятся в систему для дальнейшей обработке - вручную или на основе правил.</p>
<!-- prettier-ignore -->
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Обнаруженные адреса попадают в систему только при наличии настроенного правила, если такового нет они сохраняются во временном хранилище</p>
</div>
<h2 id="_1">Запуск опроса сети<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>Для запуска опроса необходимо выполнить команду <code>/noc net-scan</code> с заданными ключами:</p>
<ul>
<li><code>--in</code> = файл с построчным списком подсетей (префикс в отдельной строке)</li>
<li><code>--pool</code> - задание пула, для которого производится запуск</li>
<li><code>--adm-domain</code> - ЗО для устройств</li>
<li><code>--jobs</code> - число доступных потоков для выполнения</li>
<li><code>--dry-run</code> - выполнить опрос, но не отправлять результаты в систему</li>
<li><code>--print-out</code> - печатать результаты опроса на консоль</li>
<li><code>--ports</code> - набор портов для проверки подключения по TCP, разделённых запятыми</li>
<li><code>--checks</code> набор дополнительных проверок (из доступных <code>checks</code>)</li>
<li><code>--community</code> - перечень snmp community (для версий <code>v1</code>,<code>v2</code>)</li>
<li><code>--snmp-user</code> - пользователь для <code>SNMPv3</code></li>
<li><code>--labels</code> - набор меток, разделённых запятыми</li>
<li><code>--ip-scan</code> - опрашивать префиксы, отмеченные в <code>IPAM</code></li>
<li><code>--rule</code> - опрашивать диапазоны, заданные в правиле (<em>Object Discovery Rule</em>)</li>
<li>список IP префиксов для опроса</li>
</ul>
<p><em>Обнаруженные адреса</em> (доступные по ICMP) направляются для дальней обработки.</p>
<h3 id="_2">Примеры использования<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p><strong>Опросить сети 172.16.1.0/24 и 10.11.12.0/24, проверив SNMP v1/v2c/v3 и порты 80,443,10050,4443,6443. Результат не отправлять в систему, а распечатать на экране</strong></p>
<p><code>./noc net-scan --dry-run --print-out --pool default --community public --snmp-user xxx:SHA:key1:AES:key2 --ports 80,443,10050,4443,6443 172.16.1.0/24 10.11.12.0/24</code></p>
<p><strong>Опросить сети, отмеченные в IPAM для сканирования, проверив SNMP v1/v2c с несколькими community. Результат отправить в систему</strong></p>
<p><code>./noc net-scan --pool default --community,my1,my2 public --ip-scan</code></p>
<p><strong>Запустить опрос, согласно настройкам правила default из Object Discovery Rule</strong></p>
<p><code>./noc net-scan --community public --rule 'default'</code></p>
<h2 id="_3">Получения данных из внешних систем<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>При выгрузке устройств (<em>Managed Object</em>) из внешних систем через механизм ETL есть возможность выбрать: создавать из записей устройства (<em>Managed Object</em>) или направить их в <strong>найденные</strong> (<em>Discovered Object</em>). В этом случае данные опроса <em>network-scan</em> и полученные из внешней системы <em>etl</em> будут объединены на основе <em>IP адреса</em> и пула (<em>Pool</em>) и в итоге будут отображаться как одна запись.</p>
<blockquote>
<p>[!NOTE]</p>
<p>В случае источника <em>network-scan</em> обнаруженным считается адрес, доступный по <code>ICMP</code>, для <em>etl</em> обнаруженным считается любой IP адрес</p>
</blockquote>
<h2 id="_4">Обработка результатов<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>После сбора данных происходит их обработка согласно правилам. При совпадении условий, <em>IP адрес</em> заносится в список <strong>найденных устройств</strong> (<em>Discovered Object</em>), расположенном в меню <em>Service Activation -&gt; Discovered Object</em>. В соответствии с настройками записям присваивается одно из доступных состояний (столбец <em>State</em>):</p>
<ul>
<li><em>New</em> - новая запись. Состояние по умолчанию для всех записей</li>
<li><em>Approved</em> - подтверждённая запись. Выставляется для записей, готовых для синхронизации. Может быть выставлена автоматически, либо вручную.</li>
<li><em>Ignored</em> - необходимо игнорировать запись при синхронизации</li>
<li><em>Removed</em> - готовая к удалению запись. Запись, для которой время последнего опроса превышает интервал <em>expired</em></li>
</ul>
<p><img alt="" src="../../host-discovery-network/discovered_object_list_en.png" /></p>
<p>Помимо текущего состояния, отображаются следующие сведения:</p>
<ul>
<li><strong>Адрес</strong> (<em>Address</em>) - IP адрес записи</li>
<li><strong>Пул</strong> (<em>Pool</em>) - системный пул, в котором была зарегистрирована запись</li>
<li><strong>Изменена</strong> (<em>Is Dirty</em>) - флаг изменения, сигнализирует об изменении записи и необходимости её синхронизации</li>
<li><strong>Синхронизирована</strong> (<em>Is Synced</em>) - флаг синхронизации, показывает что на базе записи было создано устройство (<em>Managed Object</em>)</li>
<li><em>Имя IP адреса</em> (<em>Hostname</em>) - обнаруженной имя IP адреса</li>
<li><strong>Правило</strong> (<em>Rule</em>) - назначенное правило</li>
<li><strong>Проверки</strong> (<em>Checks</em>) - список проверок, с отображением результатов</li>
<li><em>Метки</em> (<em>Labels</em>) - набор меток, соответствующий записи</li>
</ul>
<p>Также для <strong>Найденных устройств</strong> (<em>Discovered Object</em>),  на панели инструментов доступны следующие действия:</p>
<ul>
<li><code>(1)</code> <strong>Поиск</strong> - поиск происходит по полям:</li>
<li><em>hostname</em> - имя адреса</li>
<li><em>description</em> - описание</li>
<li>
<p><em>address</em> - при указании префикса в формате <code>X.X.X.X/YY</code> поиск будет идти по подсетям</p>
</li>
<li>
<p><code>(2)</code> Показать <strong>панель фильтрации</strong> (<em>Filtering List</em>)</p>
</li>
<li><code>(3)</code> <strong>Групповые операции</strong> (<em>Group Operation</em>) - позволяет массовое изменение статусов (<em>State</em>)</li>
<li><code>(4)</code> <strong>Синхронизировать запись</strong> (<em>Sync Records</em>) - позволяет вручную запустить синхронизацию записи. Для выполнения необходимо выбрать шаблон, либо будет взят шаблон из правила (<em>Object Discovery Rule</em>)</li>
<li><code>(5)</code> <em>Scan</em> - запуск ручного сканирования <strong>Не реализовано</strong></li>
</ul>
<!-- prettier-ignore -->
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Действия выполняются для всех записей с отметкой в крайнем левом столбце</p>
</div>
<h2 id="_5">Правила обработки результатов<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>Всем обнаруженным IP адреса (<em>IP Address</em>) сопоставляются правила (<em>Object Discovery Rule</em>), если подходящего правила не нашлось, то обнаруженный адрес помещается во временное хранилище, до появления подходящего правила. Настройка правил расположена в меню <em>Service Activation -&gt; Setup -&gt; Object Discovery Rules</em>, и содержит следующие пункты:</p>
<p><img alt="" src="../../host-discovery-network/object_discovery_rule_default_form.png" /></p>
<ul>
<li><strong>Имя</strong> (<em>name</em>) - наименование правила</li>
<li><strong>Описание</strong> (<em>description</em>)</li>
<li><strong>Активное</strong> (<em>Is active</em>) - правило находится в работе</li>
<li><strong>Приоритет</strong> (<em>preference</em>) - приоритет обработки правила: ниже - раньше</li>
<li><strong>Диапазоны</strong> (<em>Network Ranges</em>) - список диапазонов IP подсетей, подпадающих под правило</li>
<li>Диапазон (<em>Network</em>) - диапазон IP адресов. Задаётся в виде префикса, либо через дефис: <code>10.0.0.2 - 10.0.0.50</code></li>
<li><em>pool</em> - ссылка на системный пул (<em>Pool</em>)</li>
<li><em>exclude</em> - исключить диапазон из обработки</li>
<li><strong>Процесс</strong> (<em>Workflow</em>) - процесс по которому происходит движение</li>
<li><strong>Источники</strong> (<em>Sources</em>) - перечень источников с указанием приоритета. При отсутствии считается что подходит <em>любой</em></li>
<li><em>source</em> - источник записи</li>
<li><em>remote_system</em> - внешняя система, из которой поступила запись (работает для источника <code>etl</code>)</li>
<li><em>update_last_seen</em> - обновлять время последнего обнаружения для этого источника</li>
<li><em>Требуется</em> (<em>is_required</em>) - обязательное наличие источника для совпадения записи</li>
<li><strong>Критерии</strong> (<em>Conditions</em>) - настройка критериев совпадения правила</li>
<li><em>Метки</em> (<em>Match Labels</em>) - набор меток для совпадения критерия. Должны совпасть все указанные</li>
<li><em>Проверки</em> (<em>Match Checks</em>) - критерий на базе проверок<ul>
<li>Проверка (<em>Check</em>)</li>
<li><em>Порт</em> (<em>Port</em>)</li>
<li>Состояние (<em>match_state</em>)<ul>
<li><em>ok</em> - проверка завершилась успехом</li>
<li><em>fail</em> - проверка завершилась провалом</li>
<li><em>any</em> - любой результат проверки</li>
</ul>
</li>
</ul>
</li>
<li><em>Данные</em> (<em>Match Data</em>) - критерий на базе данных<ul>
<li><em>field</em> - название поля: <code>hostname</code>, <code>description</code>, <code>uptime</code></li>
<li><em>op</em> - операция для совпадения</li>
<li><code>regex</code> - по регулярному выражению</li>
<li><code>contains</code> - содержит</li>
<li><code>==</code> - соответствует</li>
<li><code>!=</code> - не равное</li>
<li><code>gte</code> - больше либо равно (текстовые данные будут сравниваться как текст)</li>
<li><code>lte</code> - меньше либо равно (текстовые данные будут сравниваться как текст)</li>
<li><em>value</em> - значение для сравнения</li>
</ul>
</li>
<li><em>Включить опрос диапазона</em> (<em>enable_ip_scan_discovery</em>) - включить опрос диапазонов</li>
<li><em>Интервал опроса диапазона</em> (<em>ip_scan_discovery_interval</em>) - интервал проверки диапазонов</li>
<li><strong>Проверки</strong> (<em>Checks</em>) - настройки проверок при опросе</li>
<li><em>Проверка</em> (<em>Check</em>) - выполняемая проверка</li>
<li><em>Порт</em> (<em>Port</em>) - TCP порт</li>
<li><em>Аргумент</em> (<em>Arg</em>) - дополнительный аргумент (для проверки)</li>
<li><em>Действие по умолчанию</em> (<em>Default Action</em>) - выполнить действие при совпадении правила</li>
<li><em>new</em> - зарегистрировать запись как новую</li>
<li><em>approve</em> - подтвердить запись</li>
<li><em>ignore</em> - игнорировать запись</li>
<li><em>skip</em> - пропустить правило (перейти к следующему)</li>
<li><em>Sync on Approved</em> - запустить синхронизацию при подтверждении записи. Требует чтобы был указан <em>шаблон</em>(<em>Default Template</em>)</li>
<li><em>Шаблон по умолчанию</em> (<em>Default Template</em>) - шаблон для синхронизации записи</li>
</ul>
<p>Правила обрабатываются в порядке возрастания поля <strong>приоритет</strong> (<em>Priority</em>), по первому совпадению оно назначается IP адресу. Для совпадения проверяются следующие критерии:</p>
<ul>
<li>Соответствие IP адреса диапазону из раздела <strong>Диапазоны</strong>. Пустой раздел считается совпадающим с <em>любым</em> адресом</li>
<li>Далее проверяется <strong>Источники</strong> (<em>Source</em>), если не выставлена галочка <em>Требуется</em> (<em>Is requred</em>) значит должен быть любой источник из списка. При отсутствии настроенных источников считается что подходит <em>любой</em></li>
<li>После источников сравниваются <strong>Критерии</strong> (<em>Conditions</em>):</li>
<li>По меткам</li>
<li>По проверкам</li>
</ul>
<p>В критериях <em>по данным</em> (<em>Data</em>) доступны следующие:</p>
<ul>
<li><em>hostname</em> - имя IP адреса</li>
<li><em>description</em> - описание устройства (при опросе значение <code>sysDescr</code>)</li>
<li><em>uptime</em> - аптайм устройства (только при наличии SNMP)</li>
</ul>
<h3 id="_6">Разрешение конфликтов источников<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>При получении записей из нескольких источников может возникнуть ситуация, когда часть атрибутов есть в нескольких из них. Например это поле <code>hostname</code> может быть получено с устройства, в таком случае приоритет задаётся положением источников в настройке <code>source</code> - при совпадении атрибутов приоритет отдаётся тому, чей источник выше. В случае же отсутствия настроек в поле <code>source</code> используется приоритет по умолчанию:</p>
<ul>
<li><em>network-scan</em></li>
<li><em>neighbors</em></li>
<li><em>etl</em></li>
<li><em>manual</em></li>
</ul>
<h3 id="_7">Дедупликация<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>У одного устройства может быть больше одного IP адреса, в этом возможна ситуация при синхронизации для каждой записи  создастся отдельное <em>устройство</em> (<em>Managed Object</em>). Поэтому предусмотрен механизм проверки соответствия IP адресов одному устройству. Это делается путём сравнения доступных идентификаторов: <code>hostname</code> и <code>chassis_id</code>. У записи принадлежащие одному устройству выставляется указатель на родительскую, которая и используется для синхронизации.</p>
<h3 id="_8">Сигналы<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<h3 id="_9">Глобальные настройки<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>Для работы с обнаруженными адресами существует несколько глобальный настроек в разделе <code>network_scan</code> конфигурации. Текущие значения можно увидеть командой <code>./noc config dump network_scan</code>:</p>
<ul>
<li><code>purgatorium_ttl</code> - время устаревания записей по обнаруженным адресам. Записи, старше указанного времени исключаются из работы</li>
</ul>
<h3 id="_10">Шаблоны устройств<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>Данных полученных при обнаружении не достаточно для создания устройства (<em>Managed Obejct</em>), из обязательного состава доступны:</p>
<ul>
<li>Адрес (<em>Address</em>)</li>
<li>Пул (<em>Pool</em>)</li>
<li><em>hostname</em></li>
</ul>
<p>Для указания остальных атрибутов используется <strong>Шаблоны</strong> (<em>Model Template</em>). Расположены в меню <em>Основные -&gt; Настройки -&gt; Model Template</em> (<em>Main -&gt; Setup -&gt; Model Template</em>). В колонке <code>Name (2)</code>  указывается имена атрибутов для устройства (<em>Managed Object</em>), в <code>Default Expression</code> значение по умолчанию для соответствующего атрибута. В примере это идентификаторы соответствующих записей из справочников.</p>
<p><img alt="Model Template Form" src="../../host-discovery-network/Model_Template_Form_Default.png" /></p>
<p>Для создания устройства обязательными являются следующие атрибуты:</p>
<ul>
<li><em>administrative_domain</em> - Зона ответственности</li>
<li><em>object profile</em> - Профиль объекта</li>
<li><em>segment</em> - сегмент сети</li>
<li><em>auth_profile</em> - профиль авторизации, если не используется подбор реквизитов доступа</li>
</ul>
<h3 id="_11">Примеры настроек<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>Под приведённый выше пример, подпадают записи из сети <code>10.78.0.0/24</code>, также в нём настроен опрос данной сети с проверками <code>SNMPv2</code> и портов TCP 80,443,10050`.</p>
<p>В примере ниже настроено игнорирование всех адресов, полученных из любой <em>внешней системы</em> (<em>etl</em>) с именем (<em>hostname</em>) совпадающем с шаблоном <code>\S+(INITIATOR|initiator)\S*</code>.</p>
<p><img alt="" src="../../host-discovery-network/object_discovery_rule_form_ignore_initiator.png" /></p>
<p>В примере ниже, описаны любые адреса (без ограничений по диапазону), полученные в ходе опроса сети (<em>network-scan</em>), прошедшие проверку по <code>SNMPv2c</code> и аптаймом больше часа.</p>
<p><img alt="" src="../../host-discovery-network/object_discovery_rule_form_uptime_gte.png" /></p>
<h2 id="ipam">Занесение результатов с IPAM<a class="headerlink" href="#ipam" title="Permanent link">&para;</a></h2>
<p>Результаты опроса адресом можно использовать для актуализации <strong>IPAM</strong>, для этого в <em>профиле префикса</em> (<em>Prefix Profile</em>) необходимо разрешить создавать адреса из обнаруженных, отметив галочку (<em>IP Discovery (Ping)</em>), после этого раз в 5 минут процедура синхронизации будет запрашивать обнаруженные адреса и создавать на их основе записи в IPAM.</p>
<p><img alt="IP Discovery on IPAM" src="../../host-discovery-network/ipam_prefix_profile_ip_discovery.png" /></p>
<h2 id="_12">Автоматический запуск сканирования<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<!-- prettier-ignore -->
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Данный функционал на текущий момент не реализован</p>
</div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Нижний колонтитул" >
        
          
          <a href="../configuration-management/" class="md-footer__link md-footer__link--prev" aria-label="Назад: Configuration Management">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Назад
              </span>
              <div class="md-ellipsis">
                Configuration Management
              </div>
            </div>
          </a>
        
        
          
          <a href="../fault-management/" class="md-footer__link md-footer__link--next" aria-label="Вперед: Fault Management">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Вперед
              </span>
              <div class="md-ellipsis">
                Fault Management
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      2007-2025, Gufo Labs
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["content.action.edit", "navigation.tabs", "navigation.tabs.sticky", "navigation.prune", "navigation.footer"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": "24.1"}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>